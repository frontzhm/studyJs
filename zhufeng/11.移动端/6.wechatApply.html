<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link href="http://cdn.bootcss.com/normalize/5.0.0/normalize.css" rel="stylesheet">
    <link href="http://cdn.bootcss.com/Swiper/3.3.1/css/swiper.css" rel="stylesheet">
    <style>
    html,
    body {
        width: 100%;
        height: 100%;
        overflow: hidden;
    }
    
    html {
        font-size: 100px;
    }
    
    .arrow {
        width: .08rem;
        height: .08rem;
        position: absolute;
        left: 50%;
        margin-left: -.04rem;
        z-index: 10;
        bottom: .01rem;
        border-left: 2px solid #fff;
        border-bottom: 2px solid #fff;
        transform: rotate(135deg);
        /*both表示动画回到原位*/
        /*animation: bounce 1s linear 0s infinite both;*/
    }
    
    .music {
    	display: none;
        position: absolute;
        top: .02rem;
        right: .02rem;
        width: .1rem;
        height: .1rem;
        z-index: 10;
        background-color: #000;
    }
    
    .music.move {
        -webkit-animation: musicMove 1s linear 0s infinite both;
        animation: musicMove 1s linear 0s infinite both;
    }
    
    @-webkit-keyframes musicMove {
        0% {
            -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
        }
        100% {
            -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
        }
    }
    
    @keyframes musicMove {
        0% {
            -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
        }
        100% {
            -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
        }
    }
    
    .main,
    .swiper-container,
    .swiper-slide {
        width: 100%;
        height: 100%;
        overflow: hidden;
    }
    /*-------------PAGE1-------------*/
    
    .page1,
    .page2 {
        background-size: cover;
        background: #f99;
        position: relative;
    }
    
    .page2 {
        background-color: #88f;
    }
    
    .c1,
    .c2,
    .c3,
    .c4 {
        position: absolute;
        width: 0.4rem;
        height: 0.4rem;
        background-color: #9f9;
        /*后来加的*/
        opacity: 0;
    }
    
    .c2 {
        top: 0.2rem;
        right: 0.4rem;
        background-color: #fff;
        transition: ;
    }
    
    .c3 {
        bottom: .2rem;
        left: .2rem;
        background-color: #ccc;
    }
    
    .c4 {
        bottom: .2rem;
        left: .7rem;
        background-color: #ccc;
    }
    /*-------------PAGE2-------------*/
    
    .page2 {
        background-size: cover;
        background: #99f;
    }
    
    .page2 .c2 {
        bottom: .2rem;
        top: auto;
    }
    /*动画找animate.css*/
    
    @-webkit-keyframes bounce {
        from,
        20%,
        53%,
        80%,
        to {
            -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
        }
        40%,
        43% {
            -webkit-animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
            animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
            -webkit-transform: translate3d(0, -30px, 0);
            transform: translate3d(0, -30px, 0);
        }
        70% {
            -webkit-animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
            animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
            -webkit-transform: translate3d(0, -15px, 0);
            transform: translate3d(0, -15px, 0);
        }
        90% {
            -webkit-transform: translate3d(0, -4px, 0);
            transform: translate3d(0, -4px, 0);
        }
    }
    
    @keyframes bounce {
        from,
        20%,
        53%,
        80%,
        to {
            -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
        }
        40%,
        43% {
            -webkit-animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
            animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
            -webkit-transform: translate3d(0, -30px, 0);
            transform: translate3d(0, -30px, 0);
        }
        70% {
            -webkit-animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
            animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
            -webkit-transform: translate3d(0, -15px, 0);
            transform: translate3d(0, -15px, 0);
        }
        90% {
            -webkit-transform: translate3d(0, -4px, 0);
            transform: translate3d(0, -4px, 0);
        }
    }
    
    @-webkit-keyframes bounceInUp {
        from,
        60%,
        75%,
        90%,
        to {
            -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        }
        from {
            opacity: 0;
            -webkit-transform: translate3d(0, 3000px, 0);
            transform: translate3d(0, 3000px, 0);
        }
        60% {
            opacity: 1;
            -webkit-transform: translate3d(0, -20px, 0);
            transform: translate3d(0, -20px, 0);
        }
        75% {
            -webkit-transform: translate3d(0, 10px, 0);
            transform: translate3d(0, 10px, 0);
        }
        90% {
            -webkit-transform: translate3d(0, -5px, 0);
            transform: translate3d(0, -5px, 0);
        }
        to {
            opacity: 1;
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
        }
    }
    
    @keyframes bounceInUp {
        from,
        60%,
        75%,
        90%,
        to {
            -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        }
        from {
            opacity: 0;
            -webkit-transform: translate3d(0, 3000px, 0);
            transform: translate3d(0, 3000px, 0);
        }
        60% {
            opacity: 1;
            -webkit-transform: translate3d(0, -20px, 0);
            transform: translate3d(0, -20px, 0);
        }
        75% {
            -webkit-transform: translate3d(0, 10px, 0);
            transform: translate3d(0, 10px, 0);
        }
        90% {
            -webkit-transform: translate3d(0, -5px, 0);
            transform: translate3d(0, -5px, 0);
        }
        to {
            opacity: 1;
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
        }
    }
    
    @-webkit-keyframes bounceInDown {
        from,
        60%,
        75%,
        90%,
        to {
            -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        }
        0% {
            opacity: 0;
            -webkit-transform: translate3d(0, -3000px, 0);
            transform: translate3d(0, -3000px, 0);
        }
        60% {
            opacity: 1;
            -webkit-transform: translate3d(0, 25px, 0);
            transform: translate3d(0, 25px, 0);
        }
        75% {
            -webkit-transform: translate3d(0, -10px, 0);
            transform: translate3d(0, -10px, 0);
        }
        90% {
            -webkit-transform: translate3d(0, 5px, 0);
            transform: translate3d(0, 5px, 0);
        }
        to {
            opacity: 1;
            -webkit-transform: none;
            transform: none;
        }
    }
    
    @keyframes bounceInDown {
        from,
        60%,
        75%,
        90%,
        to {
            -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        }
        0% {
            opacity: 0;
            -webkit-transform: translate3d(0, -3000px, 0);
            transform: translate3d(0, -3000px, 0);
        }
        60% {
            opacity: 1;
            -webkit-transform: translate3d(0, 25px, 0);
            transform: translate3d(0, 25px, 0);
        }
        75% {
            -webkit-transform: translate3d(0, -10px, 0);
            transform: translate3d(0, -10px, 0);
        }
        90% {
            -webkit-transform: translate3d(0, 5px, 0);
            transform: translate3d(0, 5px, 0);
        }
        to {
            opacity: 1;
            -webkit-transform: none;
            transform: none;
        }
    }
    
    @-webkit-keyframes bounceInLeft {
        from,
        60%,
        75%,
        90%,
        to {
            -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        }
        0% {
            opacity: 0;
            -webkit-transform: translate3d(-3000px, 0, 0);
            transform: translate3d(-3000px, 0, 0);
        }
        60% {
            opacity: 1;
            -webkit-transform: translate3d(25px, 0, 0);
            transform: translate3d(25px, 0, 0);
        }
        75% {
            -webkit-transform: translate3d(-10px, 0, 0);
            transform: translate3d(-10px, 0, 0);
        }
        90% {
            -webkit-transform: translate3d(5px, 0, 0);
            transform: translate3d(5px, 0, 0);
        }
        to {
            opacity: 1;
            -webkit-transform: none;
            transform: none;
        }
    }
    
    @keyframes bounceInLeft {
        from,
        60%,
        75%,
        90%,
        to {
            -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        }
        0% {
            opacity: 0;
            -webkit-transform: translate3d(-3000px, 0, 0);
            transform: translate3d(-3000px, 0, 0);
        }
        60% {
            opacity: 1;
            -webkit-transform: translate3d(25px, 0, 0);
            transform: translate3d(25px, 0, 0);
        }
        75% {
            -webkit-transform: translate3d(-10px, 0, 0);
            transform: translate3d(-10px, 0, 0);
        }
        90% {
            -webkit-transform: translate3d(5px, 0, 0);
            transform: translate3d(5px, 0, 0);
        }
        to {
            opacity: 1;
            -webkit-transform: none;
            transform: none;
        }
    }
    
    @-webkit-keyframes bounceInRight {
        from,
        60%,
        75%,
        90%,
        to {
            -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        }
        from {
            opacity: 0;
            -webkit-transform: translate3d(3000px, 0, 0);
            transform: translate3d(3000px, 0, 0);
        }
        60% {
            opacity: 1;
            -webkit-transform: translate3d(-25px, 0, 0);
            transform: translate3d(-25px, 0, 0);
        }
        75% {
            -webkit-transform: translate3d(10px, 0, 0);
            transform: translate3d(10px, 0, 0);
        }
        90% {
            -webkit-transform: translate3d(-5px, 0, 0);
            transform: translate3d(-5px, 0, 0);
        }
        to {
            opacity: 1;
            -webkit-transform: none;
            transform: none;
        }
    }
    
    @keyframes bounceInRight {
        from,
        60%,
        75%,
        90%,
        to {
            -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        }
        from {
            opacity: 0;
            -webkit-transform: translate3d(3000px, 0, 0);
            transform: translate3d(3000px, 0, 0);
        }
        60% {
            opacity: 1;
            -webkit-transform: translate3d(-25px, 0, 0);
            transform: translate3d(-25px, 0, 0);
        }
        75% {
            -webkit-transform: translate3d(10px, 0, 0);
            transform: translate3d(10px, 0, 0);
        }
        90% {
            -webkit-transform: translate3d(-5px, 0, 0);
            transform: translate3d(-5px, 0, 0);
        }
        to {
            opacity: 1;
            -webkit-transform: none;
            transform: none;
        }
    }
    
    @-webkit-keyframes zoomIn {
        from {
            opacity: 0;
            -webkit-transform: scale3d(.3, .3, .3);
            transform: scale3d(.3, .3, .3);
        }
        50% {
            opacity: 1;
        }
        to {
            opacity: 1;
        }
    }
    
    @keyframes zoomIn {
        from {
            opacity: 0;
            -webkit-transform: scale3d(.3, .3, .3);
            transform: scale3d(.3, .3, .3);
        }
        50% {
            opacity: 1;
        }
        to {
            opacity: 1;
        }
    }
    /*实现切换完成后页面中的元素再开始运动的思想
		开始的时候,当前这个区域没有对应的IP,当切换到这个区域的时候,我们为其增加ID,在css中我们把所有的动画效果都放在指定的Id下,这样的话只需要让该区域有ID,当前页面的所有动画都可以播放了*/
    
    #page1 div:nth-child(1) {
        -webkit-animation: bounceInLeft 1s linear 0s both;
        animation: bounceInLeft 1s linear 0s both;
    }
    
    #page1 div:nth-child(2) {
        -webkit-animation: bounceInRight 1s linear .3s both;
        animation: bounceInRight 1s linear .3s both;
    }
    
    #page1 div:nth-child(3) {
        -webkit-animation: bounceInUp 1s linear .6s both;
        animation: bounceInUp 1s linear .6s both;
    }
    
    #page1 div:nth-child(4) {
        -webkit-animation: bounceInUp 1s linear .9s both;
        animation: bounceInUp 1s linear .9s both;
    }
    
    #page2 div:nth-child(1) {
        -webkit-animation: bounceInLeft 1s linear 0s both;
        animation: bounceInLeft 1s linear 0s both;
    }
    
    #page2 div:nth-child(2) {
        -webkit-animation: zoomIn 1s linear .3s both;
        animation: zoomIn 1s linear .3s both;
    }
    
    #page2 div:nth-child(3) {
        -webkit-animation: zoomIn 1s linear .6s both;
        animation: zoomIn 1s linear .6s both;
    }
    
    #page2 div:nth-child(4) {
        -webkit-animation: zoomIn 1s linear .9s both;
        animation: zoomIn 1s linear .9s both;
    }
    </style>
</head>

<body>
    <section class="main">
        <!-- CONTAINER -->
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <!-- slide1 -->
                <div class="swiper-slide page1" id="">
                    <div class="c1"></div>
                    <div class="c2"></div>
                    <div class="c3"></div>
                    <div class="c4"></div>
                </div>
                <!-- slide2 -->
                <div class="swiper-slide page2">
                    <div class="c1"></div>
                    <div class="c2"></div>
                    <div class="c3"></div>
                    <div class="c4"></div>
                </div>
            </div>
            <!-- ARROW -->
            <div class="arrow">
            </div>
            <!-- MUSIC -->
            <div class="music move" id="musicMenu">
                <audio id="musicAudio" src="audio/beyond.mp3" preload="none" loop>
                    <!-- w为了优化性能自己写自动播放 -->
                    <!-- 	<source src="audio/beyond.mp3" type="audio/mpeg">
            	<source src="audio/beyond.wav" type="audio/wav">
            	<source src="audio/beyond.ogg" type="audio/ogg"> -->
                </audio>
            </div>
        </div>
    </section>
    <script src="http://cdn.bootcss.com/Swiper/3.3.1/js/swiper.js"></script>
    <script src="../js/fastclick.js"></script>
    <script>
    // 移动端点击事件有300ms延迟 300ms内如果再次点击 就算双击
    // fastclick就是解决这个延迟的
    // 事件委托
    FastClick.attach(document.body);
    // rem
    ~ function() {
        var designWidth = 640;

        var deviceWidth = document.documentElement.clientWidth;
        var ratio = designWidth / deviceWidth;
        var oMain = document.querySelector(".main");
        if (deviceWidth > designWidth) {
            // Location.href="http://www.baidu.com";
            oMain.style.margin = "0 auto";
            oMain.style.width = designWidth + "px";
            return;

        }
        document.documentElement.style.fontSize = ratio * 100 + "px";


    }();
    var page1 = document.querySelector(".page1");
    var page2 = document.querySelector(".page2");
    // init swiper
    var cur = null;
    var swiper = new Swiper('.swiper-container', {
            direction: 'vertical',
            loop: true,
            onSlideChangeStart: function(swiper) {
                // 当切换结束后,给当前区域添加对应的id
                // 0    1 2 3 4{n-1}
                // n-2  1 2 3 1
                var slideAry = swiper.slides; //获取当前一共有多少活动块(包含loop模式前后多加的两个人)
                var
                    curIn = swiper.activeIndex, // 当前的索引
                    total = slideAry.length;
                var targetId = "page";
                switch (curIn) {
                    case 0:
                        targetId += total - 2;
                        break;
                    case (total - 1):
                        targetId += 1;
                        break;
                    default:
                        targetId += curIn;
                        break;

                }
                slideAry = Array.prototype.slice.call(slideAry, 0);
                // 给当前活动块设置即可,其余的移除
                slideAry.forEach(function(element, index) {
                    if (curIn === index) {
                        element.id = targetId;
                        return;
                    }
                    element.id = null;
                });
                // 为了一开始没有图片 所以每个页面的图片设置opacity=0,在动画的100%加上opacity=1
                // 在加上小箭头底部
            }
        })
        // music
        ~ function() {
        	var 
        	musicMenu = document.getElementById("musicMenu")
        	musicAudio = document.getElementById("musicAudio")
            musicMenu.addEventListener("click", function () {
            	 if(musicAudio.paused){
            	 	// 暂停状态
            	 	musicAudio.play();
            	 	musicMenu.className = "music move";
            	 	return;
            	 	
            	 } 
            	 musicAudio.pause();
            	 musicMenu.className = "music";
            })
            function controlMusic() {
            	musicAudio.volume=0.1;
            	musicAudio.play();
            	musicAudio.addEventListener("canplay", function () {
            		 musicMenu.style.display = "block";
            		 musicMenu.className = "music move";

            	},false);
            }
            window.setTimeout(controlMusic, 1000)

        }()
    </script>
</body>

</html>
