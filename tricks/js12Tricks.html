<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>12个js技巧</title>
</head>

<body>
    <h2>1.!!variable 只要变量为0,NaN,null,undefined返回false</h2>
    <h2>2.字符串,date前面加上"+"或者在后面加"-0",就会变成数字类型,不是纯数字的会变成NaN</h2>
    <h2>3.&& 条件符可以代替 if(obj){obj.use()}   obj&&obj.use(),若是真则执行后面代码</h2>
    <h2>4.|| 运算符可以选择默认值   this.name = name || "话国战"</h2>
    <h2>5.arr.length放在循环体外, 以前for(var i=0;i&lt;arr.length;i++) 应该变成for(var i=0,l=arr.length;i&lt;l;i++)</h2>
    <h2>6.检测对象中的属性 避免运行未定义的的函数或属性 if('querySelector' in document){document.querySelector("#id")}else{document.get..id("id")}</h2>
    <h2>7.获取数组中最后一个元素,arr.slice(-1)或者arr[arr.length-1]</h2>
    <h2>8.数组截断  arr.length = 2,变相截断</h2>
    <h2>9.字符串中实现查找替换的功能, var string="dbdbdb"; string.replace(/hd/g,"a"),ababab</h2>
    <h2>10.合并数组,以前arr1.concat(arr2)返回一个新数组由两个数组拼接起来的,不改变原数组,现在[].push.call(arr1,arr2)返回的是arr1加上arr2后的数组长度,arr1数组变了,后面是arr2的数组</h2>
    <h2>11.将nodelist转换成数组,,,[].slice.call(document.querySelectorAll("p"))</h2>

    <h2>12.数组元素的洗牌  arr.sort(function(){return (Math.random())-0.5})</h2>
    <p>1</p>
    <p>2</p>
    <p>3</p>
    <a href="">hehe</a>
    <script>




    /**
     * 1
     */
    // !!variable  只要变量值为0,NaN,'',null,undefined返回false ,其他均为true
    console.log(!!'o');
    /**
     * 2
     */
    // 字符串前面加'+'就变成数字,,或者后面-0,若字符串不是纯数字会变成NaN
    var string5 = '5';
    var num5 = +string5;
    var num5a = string5 - 0;
    console.log(typeof string5);
    console.log(typeof num5);
    console.log(typeof num5a);

    //date对象 也同上
    var date = new Date();
    var datenum = +date;
    var datenuma = date - 0;
    console.log(typeof date);
    console.log(typeof datenum);
    console.log(typeof datenuma);
    console.log(datenuma);
    /**
     * 3
     */

    // 并条件符的擅用 &&
    // a && b    a为真则执行b返回b,a为假则不执行b返回a
    var andwho = 3 && 5;
    var andwho1 = undefined && 5;
    console.log(andwho)
    console.log(andwho1)

    // so
    var tobe = '1';
    var return5 = function() {
            console.log(5)
        }
        // 平时的if写法可以
    if (tobe) {
        return5();
    }
    // 相当于
    tobe && return5();
    // 若想用对象的某方法时,先确定对象存在与否再执行方法
    var user = {
        eat: function() {
            console.log('就知道吃')
        }
    };
    user && user.eat();
    /**
     * 4
     */

    // 可以用 || 表示不符合条件时用默认值

    function User(name, age) {
        this.name = name || 'Queen';
        this.age = age || 24;
    }
    var user1 = new User('o');
    console.log(user1)

    /**
     * 5
     */
    // array.length不要写在写在循环体中
    // 以下是错误写法
    var numarr = [1, 2, 3];
    for (var i = 0; i < numarr.length; i++) {
        console.log(numarr[i]);
    }
    // 正确写法
    var numarr1 = [1, 2, 3];
    for (var i = 0, l = numarr1.length; i < l; i++) {
        console.log(numarr[i]);
    }
    // 推荐写法
    var numarr2 = [1, 2, 3];
    var i, l; // 一目了然这是全局变量
    for (i = 0, l = numarr2.length; i < l; i++) {
        console.log(numarr[i]);
    }
    /**
     * 6
     */
    // 检测对象中的属性是否存在
    if ('querySelector' in document) {
        document.querySelector("#id")
    } else {
        document.getElementById("id")
    }
    /**
     * 7
     */
    // 获取数组的最后一个元素
    // slice(start,end)  获取start和end之间的数组元素,返回符合条件的数组,不包括end,只传一个参数默认是到最后一个数组元素,如果起始的地方是-1,表示最后一个元素,-2表示倒数第二个
    var numarr3 = [1, 2, 3, 4]
        // 最后一个元素
    console.log(numarr3[numarr3.length - 1])
        // 只有最后一个元素的数组
    console.log(numarr3.slice(-1))
        // 随手说下,要是在后面加个元素
    numarr3[numarr3.length] = 5;

    console.log(numarr3);
    /**
     * 8
     */
    // 数组截断
    var numarr4 = [1, 2, 3, 4, 56];
    numarr4.length = 4;
    console.log(numarr4)

    /**
     * 9
     */
    // 替换所有
    // stringObj.replace(rgExp, replaceText) 其中stringObj是字符串(string)，reExp可以是正则表达式对象(RegExp)也可以是字符串(string)，replaceText是替代查找到的字符串,且返回新的字符串  不改变原字符串
    var string1 = "馒头香,馒头白,吃馒头";
    // 这种形式只能改变第一个
    string2 = string1.replace(/馒头/, "包子");
    console.log(string1);
    console.log(string2);
    // 这种形式就可以全部替换
    string3 = string1.replace(/馒头/g, "包子");
    console.log(string3);
    /**
     * 10
     */
    // 合并数组
    // 一般用concat,同样不改变原数组
    var numarr5 = [1];
    var numarr6 = [2];
    var numarr7 = numarr5.concat(numarr6);
    console.log(numarr5)
    console.log(numarr6)
    console.log(numarr7)

    // 然而大型数组的话 不适用concat,消耗太多内存
    // ????????????????apply()
    // push改变元素组
    // 用apply的话可以连接两个数组,原数组合并
    var numarr8 = [].push.apply(numarr5, numarr6);
    // [1,2]
    console.log(numarr5)
    console.log(numarr6)
    console.log(numarr8)



    // 说说push
    // 
        /**
         * 11
         */


    /* 插个this 的话题
     * 定义全局函数时,相当于给window定义方法,函数中的this指向拥有该方法的对象
     * 构造函数时,构造时this没有值,使用的时候是构造的新对象
     * 
     */
    var globalFun = function() {
        console.log(this);
    }
    window.globalFun();

    var obj1 = {
            name: 'q',
            objFun: function() {
                console.log(this)
            },
            objT: function() {
                return 1
            }

        }
        // 返回对象的时候 一般不显示对象的方法
    obj1.objFun();

    var newFun = function(age) {
        this.age = age;
        console.log(this);
    };
    // new 相当于一个新的种类 相当于数组 对象或者日期
    var newFun1 = new newFun(1);
    // newFun {age: 1}
    console.log(newFun1);
    // newFun {age: 1}
    var newFun2 = new newFun(2);
    // newFun {age: 2}
    console.log(newFun2);
    var n = {
        name: 'e'
    };

    console.log(n);
    // Object {name: "e"}

    function myFunction(a, b) {
        console.log(this)
        return a * b;
    }
    // call就是改变this的值,之后的是普通的传参,知道参数数量的用这个
    // apply就是改变this的值,之后的是普通的传参[],不知道的用这个
    var myObject1 = myFunction.call(newFun1, 10, 1);
    var myObject2 = myFunction.call(newFun2, 10, 2);
    var myObject3 = myFunction.apply(newFun2, [10, 3]);
    console.log(myObject1);
    console.log(myObject2);
    console.log(myObject3);


    // 说说slice(英文意思划分,切成片)
    // 浅复制数组的某些元素组成新数组,并返回
    var arr4 = [1,2,3,4];
    // 相当于取第二个和第三个元素
    var arr5 = arr4.slice(1,3);
    // 什么都不写的话返回整个数组
    var arr9 = arr4.slice();
    //[2,3]
    console.log(arr5);
    console.log(arr9);
    arr9.length = 2;
    console.log(arr4);

    // 字符串的时候
    var arr6 = "[1,2,3,4]";
    // 1,
    var arr7 = arr6.slice(1,3);
    console.log(arr7);
   // slice 方法可以用来将一个类数组（Array-like）对象/集合转换成一个数组。你只需将该方法绑定到这个对象上。
   // 典型的类数组:nodelist,arguments
   function list(){
    return Array.prototype.slice.call(arguments)
    // [].slice.call(arguments)
    // return Array.prototype.slice.call(arguments,0,1)
    // 相当于arguments.slice()
   }

   var list1 = list(1,2,3);
   var list2 = list("123");
   // [1,2,3]
   console.log(list1);
   // ["123"]
   console.log(list2);

    /**
     *       正餐来了,把nodeList 变成数组,这样就可以用数组的方法了
     */
    // para 是类数组
    var para = document.querySelectorAll("p");
    console.log(para instanceof Array);
    var arr1 = [].slice.call(para);
    // js6
    var arr2 = Array.from(para);


    console.log(arr1 instanceof Array);
    console.log(arr2 instanceof Array);

    /**
     * 12
     */
    // 数组元素的洗牌
    var arr11 = [11,23,13,44,15];
    // 因为排序的sort值不固定,固随机排序,会直接在原数组上修改
    // sort  其实是进行很多次的排序,每次排序都走一遍排序函数 最后呈现的是一个结果
    console.log(arr11.sort(function() { return Math.random() - 0.5 }));

    // 顺手玩下sort,Array.prototype.sort() 是按unicode排序,从小到大排序
    // sort(-1) unicode按从小到大排序,也就是默认的情况
    // sort(1)  unicode按从大到小排序
    // 但sort(fun),可以按某种功能排序
    var fruits = ['peach','apple','banana'];
    var arr12 = [33,52,12,31,89,45]
    console.log(fruits.sort())
    console.log(arr12.sort());
    var compareFun =function (a,b) {
        // 因为返回值是 算数计算方法a-b  所以返回的结果自然按照数学的排序
        // 只要返回值<0,a就在b前面
        // 有点像冒泡
        return a-b;
    }
    console.log(arr12.sort(compareFun));
  

    </script>
</body>

</html>
